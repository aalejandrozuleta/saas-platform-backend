FROM node:24-alpine

WORKDIR /app

RUN npm install -g pnpm

ENV NODE_ENV=development
ENV PNPM_STORE_PATH=/pnpm-store

COPY package.json pnpm-lock.yaml pnpm-workspace.yaml tsconfig.base.json ./
COPY shared/package.json shared/package.json
COPY services/auth-service/package.json services/auth-service/package.json

RUN pnpm install --frozen-lockfile

WORKDIR /app/services/auth-service
EXPOSE 3001

CMD ["pnpm", "run", "dev"]
